import{n as e,_ as s}from"./index.a407af4b.js";import"./vendor.47e86619.js";const t={};var n=e({name:"BlockPreviewMenu",props:["el"],components:{"block-preview-element":()=>s((()=>import("./block.element.cdd81811.js")),["/assets/block.element.cdd81811.js","/assets/vendor.47e86619.js","/assets/index.a407af4b.js","/assets/index.1d2421c9.css"]),"block-preview-single-container":()=>s((()=>import("./block.preview.single.container.da6ae782.js")),["/assets/block.preview.single.container.da6ae782.js","/assets/index.a407af4b.js","/assets/index.1d2421c9.css","/assets/vendor.47e86619.js"])},data:()=>({submenu:null,submenu_id:null,width:0,menu_responsive:!1,responsive:!1,clientY:0,clientX:0}),computed:{menuContainerCSS(){let e=this.menu_responsive?this.el.css.responsive+" w-full":"p-0 m-0 h-0 w-0 "+this.el.css.responsive.replaceAll("p-","");return this.width>640?this.responsive=!1:this.responsive=!0,this.width>640?this.el.css.css+" "+this.el.css.container+" "+this.el.css.align:"fixed top-0 left-0 z-highest "+e},opacity(){return this.menu_responsive?"opacity-100 w-full":"opacity-0 w-0"}},methods:{background(e){if(!e||!this.menu_responsive)return"";if(e.hasOwnProperty("gallery")&&!e.gallery||!e.hasOwnProperty("gallery")){let s="";return e.image&&e.image.url&&(e.image&&e.image.url&&e.image.url.indexOf(".mp4")<0&&(s=" background-image:url("+this.$imageURL(e.image)+");")),s}},openSub(e,s){this.clientY=s.clientY+window.pageYOffset,this.clientX=s.clientX,this.submenu===e?this.submenu=null:this.submenu=e},isOver(e){return e<0?"invisible":this.submenu===e?"":"invisible"},overStyle(e,s){let t=document.querySelector(".item_"+s),n={};if(t){let e=t.getBoundingClientRect();n=this.el.css.submenu.includes("left-0")?{top:e.bottom+"px;",left:"0px;"}:{left:e.left+"px;",top:e.bottom+"px;"}}return e<0?n.height="0px;":this.submenu===e?n.height="auto;":n.height="0px;",e>-1?"height:"+n.height+"left:"+n.left+"top:"+n.top:""},getPos(e){if(this.submenu===e){let s=this.$refs["submenu_"+e][0].getBoundingClientRect().x,t=this.$refs["submenu_"+e][0].getBoundingClientRect().y,n=this.$refs["submenu_"+e][0].clientWidth,i=this.$refs["submenu_"+e][0].clientHeight,l=window.innerWidth,o=window.innerHeight;console.log(document.querySelector(".submenu_"+e).getBoundingClientRect(),s,n,s+n,l),s+n-l>0&&(this.$refs["submenu_"+e][0].style.left=l-n+"px"),t+i-o>0&&(this.$refs["submenu_"+e][0].style.transform="translateY(-110%)")}}},mounted(){this.width=window.innerWidth,window.addEventListener("resize",(()=>{this.width=window.innerWidth})),window.addEventListener("scroll",(()=>{this.clientY=this.clientY+window.pageYOffset}));let e=document.querySelector(".menu_item");e&&(this.clientY=e.getBoundingClientRect().bottom)}},(function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("nav",{ref:e.el.id,staticClass:"cursor-pointer",class:e.menuContainerCSS,style:e.background(e.el),attrs:{navigation:"",id:e.el.id}},[e.responsive?t("icon",{staticClass:"burger-icon md:hidden z-highest fixed top-0 m-1 text-3xl",class:(e.menu_responsive,e.el.css.items),attrs:{name:e.menu_responsive?e.el.icons.back:e.el.icons.burger},on:{click:function(s){e.menu_responsive=!e.menu_responsive}}}):e._e(),t("div",{staticClass:"hidden md:contents relative"},[e._l(e.el.blocks,(function(s,n){return[s.link&&!s.blocks.length?t("a",{class:s.css,attrs:{href:s.link}},[e._v(" "+e._s(s.content)+" ")]):e._e(),s.link||s.blocks.length?e._e():t("div",{staticClass:"relative flex flex-row items-center",class:s.css,attrs:{"menu-item":""}},[e._v(" "+e._s(s.content)+" ")]),!s.link&&s.blocks.length?t("div",{staticClass:"relative flex flex-row items-center",class:s.css+" menu_item item_"+s.id,on:{click:function(s){return e.openSub(n,s)}}},[e._v(" "+e._s(s.content)+" "),e.el.hasOwnProperty("icons")?t("icon",{attrs:{name:e.el.icons.submenu}}):t("icon",{attrs:{name:"expand_more"}})],1):e._e(),!s.link&&s.blocks&&s.blocks.length?t("div",{ref:"submenu_"+n,refInFor:!0,class:e.isOver(n)+" submenu submenu_"+n+" "+e.el.css.submenu+" top-0 fixed flex flex-col z-highest",style:e.overStyle(n,s.id),attrs:{submenu:""},on:{click:function(s){e.submenu=null}}},[s.blocks[0].blocks&&e.submenu===n?t("div",{style:e.getPos(n)},[e._l(s.blocks,(function(s){return[!s||s.hasOwnProperty("blocks")||s.hasOwnProperty("blocks")?e._e():t("block-preview-element",{key:s.id,attrs:{el:s,data:e.$attrs.data||null,currency:e.$attrs.currency||null,develop:!1}}),s.hasOwnProperty("blocks")?t("block-preview-single-container",{key:s.id,attrs:{doc:s,level:"1"}}):e._e()]}))],2):t("div",{staticClass:"flex flex-col"},[e._l(s.blocks,(function(n){return[t("a",{class:s.css,attrs:{href:n.link}},[t("span",[e._v(e._s(n.content))])])]}))],2)]):e._e()]}))],2),e._l(e.el.blocks,(function(s,n){return e.responsive?[e.responsive?t("div",{staticClass:"md:hidden w-0",class:e.opacity},[s.link?t("a",{attrs:{href:s.link}},[t("div",{class:e.el.css.responsive_items},[e._v(e._s(s.content))])]):e._e(),s.link||s.blocks.length?e._e():t("div",{class:e.el.css.responsive_items},[e._v(e._s(s.content))]),!s.link&&s.hasOwnProperty("blocks")&&s.blocks.length?t("div",{class:e.el.css.responsive_items,on:{click:function(s){e.submenu&&e.submenu===n?e.submenu=null:e.submenu=n}}},[e._v(" "+e._s(s.content)+" ")]):e._e()]):e._e(),e.submenu===n&&s.blocks&&s.blocks.length?t("div",{ref:"submenu_"+n,refInFor:!0,class:e.el.css.submenu+" absolute fixed flex top-0 flex-col z-highest",attrs:{"submenu-responsive":""},on:{click:function(s){e.el.css.submenu_behavior,e.submenu=null}}},[s.blocks[0].blocks&&e.submenu===n?t("div",{style:e.getPos(n),on:{mouseleave:function(s){e.el.css.submenu_behavior,e.submenu=null}}},[e._l(s.blocks,(function(s){return[!s||s.hasOwnProperty("blocks")||s.hasOwnProperty("blocks")?e._e():t("block-preview-element",{key:s.id,attrs:{el:s,data:e.$attrs.data||null,currency:e.$attrs.currency||null,develop:!1}}),s.hasOwnProperty("blocks")?t("block-preview-single-container",{key:s.id,attrs:{doc:s,level:"1"}}):e._e()]}))],2):t("div",{staticClass:"flex flex-col"},[e._l(s.blocks,(function(n){return[t("a",{class:s.css,attrs:{href:n.link}},[t("span",[e._v(e._s(n.content))])])]}))],2)]):e._e()]:e._e()}))],2)}),[],!1,(function(e){for(let s in t)this[s]=t[s]}),null,null,null);n.options.__file="src/components/blocks/block.preview.menu.vue";var i=n.exports;export default i;
