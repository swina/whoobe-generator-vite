import{n as e,_ as t,g as a}from"./index.e5aa488f.js";import{g as s,S as o}from"./vendor.47e86619.js";s.registerPlugin(o);const i={};var r=e({name:"WhoobePreview",data:()=>({printScreen:null,refreshID:null,plugins:[],previewWidth:"w-screen"}),props:["doc"],components:{"block-container":()=>t((()=>import("./block.preview.container.abb0819b.js")),["/assets/block.preview.container.abb0819b.js","/assets/block.preview.container.e5a94445.css","/assets/index.e5aa488f.js","/assets/index.1d2421c9.css","/assets/vendor.47e86619.js"])},computed:{animations:()=>a},watch:{refreshID(){}},methods:{resizeTo(e,t=null){let a=window.screen.availWidth/2-e/2;window.resizeTo(e||window.screen.availWidth,t||window.screen.availHeight),window.moveTo(a,0);let s="whoobe Preview "+(e||window.screen.availWidth)+"x"+(t||window.screen.availHeight);document.title=s},responsive(e){return this.$clean(this.$cssResponsive(e))},pageCss(e){let t=e;return this.doc.hasOwnProperty("body_bg")&&(t+=" "+this.doc.body_bg),this.doc.hasOwnProperty("body_color")&&(t+=" "+this.doc.body_color),t},stile(e){let t="";return e.hasOwnProperty("fontFamily")&&(t+='font-family:"'+e.fontFamily+'";'),t+=e.hasOwnProperty("style")?e.style:"",t+=this.background(e),t},background(e){return e.hasOwnProperty("image")&&e.image?" background-image:url("+this.$imageURL(e.image)+");":""},printSave(){this.print().then((()=>{this.$emit("save",this.printScreen),this.$emit("close")}))},async print(){let e,t;e=document.querySelector("#content"),t={type:"dataURL",useCORS:!0,scale:.5};let a=await this.$html2canvas(e,t);this.printScreen=a,this.$emit("save",a)},animate(e,t){if(!e.hasOwnProperty("gsap")&&(e.gsap={animation:"",duration:.7,delay:0,ease:"none"}),this.$refs[t]){let a=s.effects[e.gsap.animation](this.$refs[t],{trigger:this.$refs[t],duration:parseFloat(e.gsap.duration),delay:parseFloat(e.gsap.delay),ease:e.gsap.ease});o.create({id:t,start:"top 99%",trigger:this.$refs[t],toggleActions:"play pause restart none",animation:a,onEnter:()=>{e.gsap.delay?a.play():a.play(0)},onStart:()=>{console.log("started",new Date)},onComplete:()=>{console.log("completed",new Date)}})}},start(){},animateSub(e){e.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id),e.hasOwnProperty("blocks")&&e.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id),e.hasOwnProperty("blocks")&&e.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id)}))}))}))}},mounted(){console.log("Preview mounted",this.doc.id),window.resizeTo(window.screen.availWidth,window.screen.availHeight),document.querySelector("html").setAttribute("lang",navigator.language),window.scrollTo(0,0),this.refreshID=this.$randomID(),this.doc.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id),e.hasOwnProperty("blocks")&&e.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id),e.hasOwnProperty("blocks")&&e.blocks.forEach((e=>{e&&e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id),e&&e.hasOwnProperty("blocks")&&e.blocks.forEach((e=>{e.hasOwnProperty("gsap")&&e.gsap.animation&&this.animate(e,e.id)}))}))}))}))}},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{key:e.refreshID,ref:e.doc.id,class:e.pageCss(e.doc.css)+" m-auto relative overflow-y-auto z-top overflow-x-hidden ",style:e.stile(e.doc),attrs:{id:"content"}},[e.doc.hasOwnProperty("slider")?e._e():a("span",[e._l(e.doc.blocks,(function(t,s){return[!t.image||".mp4"!==t.image.ext&&"webm"!==t.image.ext?e._e():a("div",{class:"absolute "+t.css.css,attrs:{videobg:""}},[a("video",{staticClass:"object-cover h-full w-full",attrs:{playsinline:"",poster:t.image.previewUrl,autoplay:"",loop:""}},[a("source",{attrs:{src:t.image.url}})])]),t&&"grid"===t.type||"flex"===t.type||"slides"===t.type?a("block-container",{key:t.id,attrs:{doc:t,level:s+1,coords:s}}):e._e()]}))],2)])}),[],!1,(function(e){for(let t in i)this[t]=i[t]}),null,null,null);r.options.__file="src/components/blocks/block.preview.vue";var n=r.exports;export default n;
